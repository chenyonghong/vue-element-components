(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("axios"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","vue","axios","element-plus"],e):(d=typeof globalThis<"u"?globalThis:d||self,e(d["vue-element-components"]={},d.Vue,d.axios,d["element-plus"]))})(this,function(d,e,w,$){"use strict";const j=(t=>t&&typeof t=="object"&&"default"in t?t:{default:t})(w);function z(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}function k(t){let n=!1;switch(z(t)){case"string":n=t==="";break;case"undefined":n=!0;break;case"object":n=Object.keys(t).length===0;break;case"array":n=t.length===0;break;case"boolean":n=!t;break;case"null":n=!0;break}return n}function x(t){const{config:{api:n},data:i,params:a}=t,c=e.ref(),f=e.ref(!0);async function u(){if(!k(i)){c.value={data:i};return}!n||(typeof n=="function"?c.value=await n(a.value):c.value=await r(n),setTimeout(()=>{f.value=!1},1e3))}async function r(p){let{method:m,url:l}=p;return m==="get"&&(l+="?",Object.keys(a.value).forEach(g=>{l+=g+"="+a.value[g]})),(await j.default[m](l,a.value)).data}return e.watch(()=>a.value,(p,m)=>{console.log(p,m),u()},{deep:!0,immediate:!0}),{data:c,loading:f}}const R=e.defineComponent({name:"ve-table-column"}),L=e.defineComponent({...R,props:{column:{type:Object,default:{}}},setup(t){const n=t,{children:i,...a}=e.toRefs(n).column.value,c=e.useSlots(),f=e.computed(()=>{for(let r in c)if(r.startsWith("column-")&&r.slice(7)===a.prop)return c[r]}),u=e.computed(()=>{for(let r in c)if(r.startsWith("header-")&&r.slice(7)===a.prop)return c[r]});return(r,p)=>{const m=e.resolveComponent("ve-table-column"),l=e.resolveComponent("el-table-column");return e.openBlock(),e.createBlock(l,e.normalizeProps(e.guardReactiveProps(a)),e.createSlots({default:e.withCtx(()=>[e.unref(i)?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(i),s=>(e.openBlock(),e.createBlock(m,{key:s.prop,column:s},e.createSlots({_:2},[e.renderList(r.$slots,(g,h,C)=>({name:h,fn:e.withCtx(o=>[e.renderSlot(r.$slots,h,e.normalizeProps(e.guardReactiveProps(o)))])}))]),1032,["column"]))),128)):e.createCommentVNode("",!0)]),_:2},[e.unref(u)?{name:"header",fn:e.withCtx(()=>[e.renderSlot(r.$slots,"header-"+a.prop)]),key:"0"}:void 0,e.unref(f)?{name:"default",fn:e.withCtx(s=>[e.renderSlot(r.$slots,"column-"+a.prop,e.normalizeProps(e.guardReactiveProps(s)))]),key:"1"}:void 0]),1040)}}}),D=e.defineComponent({name:"table_instance"}),O=e.defineComponent({...D,props:{data:{type:Array,default:[]},columns:{type:Array,default:[]},loading:{type:Boolean,default:!0}},setup(t){const n=t,{columns:i,data:a}=e.toRefs(n),c=e.computed(()=>{if(!i.value.length&&a.value.length){let l=[];for(let s in a.value[0])l.push({prop:s,label:s});return l}else return i.value.slice()}),f=e.ref(),{handleSelectionChange:u,handleInstanceChange:r}=e.inject("methods");e.onMounted(()=>{r(f.value)});const p=e.useSlots(),m=e.computed(()=>{const l={};for(let s in p)(s.startsWith("column-")||s.startsWith("header-"))&&(l[s]=p[s]);return l});return(l,s)=>{const g=e.resolveDirective("loading");return e.withDirectives((e.openBlock(),e.createBlock(e.unref($.ElTable),e.mergeProps({ref_key:"table_instance",ref:f},l.$attrs,{data:e.unref(a),onSelectionChange:e.unref(u)}),{default:e.withCtx(()=>[e.renderSlot(l.$slots,"left"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c),h=>(e.openBlock(),e.createBlock(L,{column:h},e.createSlots({_:2},[e.renderList(e.unref(m),(C,o,_)=>({name:o,fn:e.withCtx(b=>[e.renderSlot(l.$slots,o,e.normalizeProps(e.guardReactiveProps(b)))])}))]),1032,["column"]))),256)),e.renderSlot(l.$slots,"right")]),_:3},16,["data","onSelectionChange"])),[[g,t.loading]])}}}),T=e.defineComponent({name:"VeTable"}),y=e.defineComponent({...T,props:{config:{type:Object,default:{api:{}}},data:{type:Object,default:{}}},setup(t,{expose:n}){const i=t,a=e.ref({}),{data:c,loading:f}=x({...i,params:a}),u=e.ref(),r=e.ref(),p=e.ref([]),m=o=>{r.value=o},l=o=>{p.value=o};e.provide("methods",{handleInstanceChange:m,handleSelectionChange:l}),n({el_table:r,selections:p,loading:f});const s=e.ref(0),g=e.computed(()=>{var o,_;return((o=c.value)==null?void 0:o.total)||((_=c.value)==null?void 0:_.data.length)||0});function h(o){console.log("size: ",o),a.value.size=o}function C(o){console.log("currentPage: ",o),a.value.page=o}return(o,_)=>{var S;const b=e.resolveComponent("el-pagination");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(O,e.mergeProps({ref_key:"tableRef",ref:u,data:(S=e.unref(c))==null?void 0:S.data},o.$attrs,{loading:e.unref(f)}),e.createSlots({_:2},[e.renderList(o.$slots,(P,B,M)=>({name:B,fn:e.withCtx(W=>[e.renderSlot(o.$slots,B,e.normalizeProps(e.guardReactiveProps(W)))])}))]),1040,["data","loading"]),e.unref(k)(i.config.pagination)?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(b,{key:0,currentPage:s.value,"onUpdate:currentPage":_[0]||(_[0]=P=>s.value=P),"page-size":100,layout:"total, prev, pager, next, jumper, sizes",total:e.unref(g),onSizeChange:h,onCurrentChange:C,style:{margin:"10px",float:"right"}},null,8,["currentPage","total"]))])}}});y.install=function(t){t.component(y.name,y)};const E="0.4.8",V=[y],N={install:t=>{V.forEach(n=>{t.component(n.name,n)})},version:E};d.VeTable=y,d.default=N,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
